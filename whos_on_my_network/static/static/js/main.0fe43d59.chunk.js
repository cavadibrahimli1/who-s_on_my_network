(this["webpackJsonpwhos-on-my-network-webapp"]=this["webpackJsonpwhos-on-my-network-webapp"]||[]).push([[0],{107:function(e,t,n){},137:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),l=(n(137),n(95)),o=n(9),s="Who's On My Network",u=n(10),d=n(275),m=n(276),f=n(116),v=function(e){var t=e.children;return r.a.createElement(d.a,null,r.a.createElement(m.a,{className:"justify-content-md-center"},r.a.createElement(f.a,{className:"col-md-10"},t)))},E=n(117),p=n(277),h=n(278),b=n(79),O=n(92),y=n.n(O),_=(n(148),n(11)),j={"1 Day":function(e){return _.Interval.fromDateTimes(e.minus({days:1}).startOf("day"),e.endOf("day"))},"1 Week":function(e){return _.Interval.fromDateTimes(e.minus({weeks:1}).startOf("day"),e.endOf("day"))},"1 Month":function(e){return _.Interval.fromDateTimes(e.minus({months:1}).startOf("day"),e.endOf("day"))}},g={customInput:r.a.createElement(E.a,{style:{borderRadius:0}}),showTimeSelect:!0,timeIntervals:60,timeCaption:"time",dateFormat:"dd MMM yyyy h:mm aa"},S=function(e){var t=e.startAndEndDates,n=e.setStartAndEndDates,a=function(){return t[0]},c=function(){return t[1]};return r.a.createElement(p.a,null,r.a.createElement(p.a.Text,{style:{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"none"}},"From"),r.a.createElement(y.a,Object.assign({selected:a().toJSDate(),onChange:function(e){return null!==e&&n(_.DateTime.fromJSDate(e),c())},maxDate:c().toJSDate()},g)),r.a.createElement(p.a.Text,{style:{borderRadius:0,borderLeft:"none",borderRight:"none"}},"to"),r.a.createElement(y.a,Object.assign({selected:c().toJSDate(),onChange:function(e){return null!==e&&n(a(),_.DateTime.fromJSDate(e))},minDate:a().toJSDate()},g)),r.a.createElement(h.a,{as:p.a.Append,variant:"outline-secondary",title:"Select Range",id:"date-range-dropdown"},Object.keys(j).map((function(e){return r.a.createElement(b.a.Item,{onClick:(t=e,function(){var e=j[t](_.DateTime.local());n(e.start,e.end)}),key:e},e);var t}))))},D=n(38),T=n.n(D),N=n(55),k=n(19),w={api:{root:window.location.origin}},x=function(e){return _.DateTime.fromFormat(e,"yyyy-MM-dd'T'HH:mm:ss.uZZ")};function C(e,t,n,a,r,c,i){return fetch("".concat(w.api.root,"/api/scan"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,startDate:t,endDate:n,deviceIds:a,ownerIds:r,limit:c,page:i})}).then((function(e){if(200===e.status)return e.json().then((function(e){return e.map((function(e){return{id:e.id,scan_time:x(e.scan_time),network_id:e.network_id,devices_discovered_count:e.devices_discovered_count,people_seen_count:e.people_seen_count,primary_devices_seen_count:e.primary_devices_seen_count}}))}));throw Error("Server Error (HTTP".concat(e.status,")"))}))}function F(e,t,n,a){return fetch("".concat(w.api.root,"/api/device"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,search_query:t,owner_id:n,is_primary:a})}).then((function(e){if(200===e.status)return e.json().then((function(e){return e.map((function(e){return{id:e.id,mac_address:e.mac_address,name:e.name,note:e.note,owner_id:e.owner_id,is_primary:e.is_primary,first_seen:x(e.first_seen),last_seen:x(e.last_seen)}}))}));throw Error("Server Error (HTTP".concat(e.status,")"))}))}function A(e,t){return fetch("".concat(w.api.root,"/api/person"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,name_partial:t})}).then((function(e){if(200===e.status)return e.json().then((function(e){return e.map((function(e){return{id:e.id,name:e.name,note:e.note,device_count:e.device_count,first_seen:null!==e.first_seen?x(e.first_seen):null,last_seen:null!==e.first_seen?x(e.last_seen):null}}))}));throw Error("Server Error (HTTP".concat(e.status,")"))}))}function P(e,t,n){return fetch("".concat(w.api.root,"/api/device/discovery-times"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,startDate:t,endDate:n})}).then((function(e){if(200===e.status)return e.json().then((function(e){var t=Object(k.a)({},e);return Object.keys(t).forEach((function(e){t[e]=t[e].map((function(e){return x(e)}))})),t}));throw Error("Server Error (HTTP".concat(e.status,")"))}))}function I(e,t,n){return fetch("".concat(w.api.root,"/api/person/discovery-times"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e,startDate:t,endDate:n})}).then((function(e){if(200===e.status)return e.json().then((function(e){var t=Object(k.a)({},e);return Object.keys(t).forEach((function(e){t[e]=t[e].map((function(e){return x(e)}))})),t}));throw Error("Server Error (HTTP".concat(e.status,")"))}))}var M=n(279),J=(n(107),function(e){var t=e.entityIds,n=e.entityIdNameMap,a=e.onEntityClick;return r.a.createElement("div",{className:"text-center m-auto",style:{maxWidth:800}},t.map((function(e){return r.a.createElement(M.a,{key:e,variant:"primary",className:"mr-1 unselected-entity",onClick:(t=e,function(){return a(t)})},n[e]);var t})))}),R=n(123),L=n(288),H=n(289),z=n(283),W=n(286),B=n(287),G=n(280),U=n(281),V=n(284),Z=n(285),$=n(298),q=0,X=40,K=130,Q=0,Y=Object(H.a)((function(e){var t=e.entityIds,n=e.entityDiscoveryTimes,a=e.entityIdNameMap,c=e.onEntityClick,i=e.onEntityLinkClick,l=e.maxDate,o=e.minDate,s=e.width,u=e.height,d=e.tooltipLeft,m=e.tooltipData,f=e.showTooltip,v=s-K-Q,E=u-q-X,p=t.map((function(e){return n[e].map((function(t){return[e,t]}))})).flatMap((function(e){return e})),h=Object(G.a)({range:[0,v],domain:[o.toJSDate(),l.toJSDate()]}),b=Object(U.a)({range:[E,0],domain:t.slice().reverse(),padding:.2}),O=function(e){return function(){var t=Object.keys(a).reduce((function(t,n){return void 0!==t?t:a[n]===e?n:void 0}),void 0);void 0!==t&&void 0!==i&&i(t)}},y=function(e){return function(t){var n=Object($.a)(t);if(null!==n&&e){var a=n.x-K,r=h.invert(a);f({tooltipData:{date:_.DateTime.fromJSDate(r)},tooltipLeft:a})}else f({tooltipData:void 0})}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("svg",{width:s,height:u,className:"home-chart"},r.a.createElement(z.a,{top:q,left:K},r.a.createElement(z.a,null,t.map((function(e){var t,n=h(o),a=h(l),c=(null!==(t=b(e))&&void 0!==t?t:0)+b.bandwidth()/2;return r.a.createElement(V.a,{x1:n,x2:a,y1:c,y2:c,key:"line-".concat(e),className:"horizontal-line"})}))),r.a.createElement(z.a,null,p.map((function(e,t){var n,a=e[1].toJSDate(),c=e[0],i=h(a),l=(null!==(n=b(c))&&void 0!==n?n:0)+b.bandwidth()/2;return r.a.createElement(Z.a,{key:"point-".concat(c,"-").concat(a.valueOf(),"-").concat(t),className:"dot",cx:i,cy:l,r:4})}))),m&&r.a.createElement("rect",{x:d,y:q,height:E,width:2}),r.a.createElement(W.a,{hideAxisLine:!0,hideTicks:!0,scale:b,tickFormat:function(e,t){return a[e]},tickComponent:function(e){var t,n=e.x,l=e.y,o=e.formattedValue;return r.a.createElement("text",{x:n,y:l,textAnchor:"end",dy:3,className:"entity-label"},r.a.createElement("tspan",{onClick:(t=o,function(){var e=Object.keys(a).reduce((function(e,n){return void 0!==e?e:a[n]===t?n:void 0}),void 0);void 0!==e&&void 0!==c&&c(e)})},o),void 0!==i&&r.a.createElement("tspan",{onClick:O(o)}," \ud83d\udd17"))}}),r.a.createElement(B.a,{top:E,scale:h,numTicks:10,tickFormat:function(e,t){return _.DateTime.fromJSDate(e).toFormat("d MMM")},tickLabelProps:function(e,t){return{className:"date-label",textAnchor:"middle"}}}),r.a.createElement("rect",{x:0,y:q,height:E,width:v,className:"hover-detector",onMouseMove:y(!0),onMouseLeave:y(!1)}))),m&&r.a.createElement("div",null,r.a.createElement(L.a,{top:E-14,left:d,style:{transform:"translateX(50%)"}},m.date.toFormat("ff"))))})),ee=["height"],te=function(e){var t=e.height,n=Object(R.a)(e,ee),c=Object(a.useRef)(null),i=Object(a.useState)([0,0]),l=Object(o.a)(i,2),s=l[0],u=l[1];return Object(a.useEffect)((function(){null!==c.current&&u([c.current.clientWidth,c.current.clientHeight])}),[c]),r.a.createElement("div",{ref:c,style:{height:t}},r.a.createElement(Y,Object.assign({},n,{width:s[0],height:s[1]})))},ne=n(290),ae=n(291),re=n(122),ce=n(125),ie=n.n(ce),le=function(e,t,n){var a=ie()(e+"_selectedDates",[t.toISO(),n.toISO()]),r=Object(o.a)(a,2),c=r[0],i=r[1],l=function(){return null===c?t:_.DateTime.fromISO(c[0])},s=function(){return null===c?n:_.DateTime.fromISO(c[1])};return{getStartDate:l,getEndDate:s,getStartAndEndDates:function(){return[l(),s()]},setStartAndEndDates:function(e,t){i([e.toISO(),t.toISO()])},storedStartAndEndDates:c}},oe=n(94),se=function(e,t){var n=oe.a.info(t,{position:"bottom-center",heading:e,hideAfter:20,onClick:function(){return void 0!==n&&n()}}).hide},ue=function(e,t){var n=oe.a.error(t,{position:"bottom-center",heading:e,hideAfter:20,onClick:function(){return void 0!==n&&n()}}).hide},de=function(e){return ue("Failed to get ".concat(e),"Failed to get ".concat(e,", please make sure the server is available."))},me=function(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],r=t[1],c=function(){A().then((function(e){return r(e)})).catch((function(e){return de("people")}))};return Object(a.useEffect)((function(){c()}),[]),{people:n,refresh:c}},fe=function(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],r=t[1],c=function(){F().then((function(e){return r(e)})).catch((function(e){return de("devices")}))};return Object(a.useEffect)((function(){c()}),[]),{devices:n,refresh:c}},ve=n(21),Ee=function(e){return null===e||void 0===e?void 0:e.slice().sort((function(e,t){return-e.last_seen.diff(t.last_seen).as("milliseconds")})).sort((function(e,t){return e.name===t.name?0:""===e.name?1:""===t.name?-1:e.name>t.name?1:-1}))},pe=function(e){return null===e||void 0===e?void 0:e.sort((function(e,t){return e.name===t.name?0:e.name>t.name?1:-1}))},he=_.DateTime.local().minus({weeks:1}).startOf("day"),be=_.DateTime.local().endOf("day"),Oe=function(){var e,t;Object(u.useTitle)("Home - ".concat(s));var n=fe().devices,c=me().people,i=le("home",he,be),d=i.getStartDate,m=i.getEndDate,f=i.getStartAndEndDates,E=i.setStartAndEndDates,p=i.storedStartAndEndDates,O=Object(a.useState)("device"),y=Object(o.a)(O,2),_=y[0],j=y[1],g=Object(a.useState)([]),D=Object(o.a)(g,2),T=D[0],N=D[1],w=Object(a.useState)({}),x=Object(o.a)(w,2),C=x[0],F=x[1];Object(a.useEffect)((function(){"device"===_?P(void 0,d(),m()).then((function(e){return F(e)})):"person"===_&&I(void 0,d(),m()).then((function(e){return F(e)}))}),[_,p]);var A=function(){"device"===_&&void 0!==n?N(n.map((function(e){return e.id+""}))):"person"===_&&void 0!==c&&N(c.map((function(e){return e.id+""})))};Object(a.useEffect)((function(){A()}),[n,c]),Object(a.useEffect)((function(){A()}),[_]);var M,R,L,H=function(e){-1===T.indexOf(e)?N([].concat(Object(l.a)(T),[e])):N(Object(l.a)(T.filter((function(t){return t!==e}))))},z=function(e,t){return Object.keys(e).reduce((function(n,a){var r=-1!==t.indexOf(a)?"selectedDiscoveryTimes":"unselectedDiscoveryTimes";return Object(k.a)(Object(k.a)({},n),{},Object(ve.a)({},r,Object(k.a)(Object(k.a)({},n[r]),{},Object(ve.a)({},a,e[a]))))}),{selectedDiscoveryTimes:{},unselectedDiscoveryTimes:{}})}(C,T),W=z.selectedDiscoveryTimes,B=z.unselectedDiscoveryTimes;"device"===_?M=null===(R=Ee(n))||void 0===R?void 0:R.map((function(e){return e.id+""})):M=null===(L=pe(c))||void 0===L?void 0:L.map((function(e){return e.id+""}));var G=(null!==(e=M)&&void 0!==e?e:[]).filter((function(e){return e in W})),U=(null!==(t=M)&&void 0!==t?t:[]).filter((function(e){return e in B})),V=function(e,t,n,a){return"device"===t&&void 0===n||"person"===t&&void 0===a?{}:Object.keys(e).reduce((function(e,r){if("device"===t){var c=null===n||void 0===n?void 0:n.find((function(e){return e.id+""===r})),i=void 0===c?"Not Found":""!==c.name?c.name:c.mac_address.toUpperCase();return Object(k.a)(Object(k.a)({},e),{},Object(ve.a)({},r,i))}if("person"===t){var l=null===a||void 0===a?void 0:a.find((function(e){return e.id+""===r})),o=void 0===l?"Not Found":l.name;return Object(k.a)(Object(k.a)({},e),{},Object(ve.a)({},r,o))}return Object(k.a)({},e)}),{})}(C,_,n,c);return r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center"},"Overview of Scans"),r.a.createElement(S,{startAndEndDates:f(),setStartAndEndDates:E}),r.a.createElement("div",{className:"mb-4"},r.a.createElement(te,{entityIds:G,entityDiscoveryTimes:W,entityIdNameMap:V,onEntityClick:H,onEntityLinkClick:function(e){"device"===_?Object(u.navigate)("/devices/".concat(e)):Object(u.navigate)("/people/".concat(e))},minDate:d(),maxDate:m(),height:500}),r.a.createElement(ne.a,{className:"mb-2 text-center d-block"},r.a.createElement(h.a,{as:ae.a,id:"entity-selection",title:"Entity Type: ".concat("device"===_?"Device":"People")},r.a.createElement(b.a.Item,{onClick:function(){return j("device")}},"Device"),r.a.createElement(b.a.Item,{onClick:function(){return j("person")}},"People")),r.a.createElement(ae.a,{className:"ml-2"},r.a.createElement(re.a,{variant:"primary",onClick:A},"Select All"),r.a.createElement(re.a,{variant:"primary",onClick:function(){return N([])}},"Deselect All"))),r.a.createElement(J,{entityIds:U,entityIdNameMap:V,onEntityClick:H})))},ye=n(292),_e=n(293),je=_.DateTime.local().minus({weeks:1}).startOf("day"),ge=_.DateTime.local().endOf("day"),Se=function(){Object(u.useTitle)("Scans - ".concat(s));var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],c=t[1],i=le("scans",je,ge),l=i.getStartDate,d=i.getEndDate,m=i.getStartAndEndDates,f=i.setStartAndEndDates,E=i.storedStartAndEndDates;Object(a.useEffect)((function(){C(void 0,l(),d()).then((function(e){return c(e)})).catch((function(e){return de("scans")}))}),[E]);return r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center"},"Scans"),r.a.createElement("div",{className:"mb-2"},r.a.createElement(S,{startAndEndDates:m(),setStartAndEndDates:f})),r.a.createElement(ye.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Network Id"),r.a.createElement("th",null,"Devices"),r.a.createElement("th",null,"People"),r.a.createElement("th",null,"Primary Devices"))),r.a.createElement("tbody",null,void 0!==n&&n.map((function(e){return r.a.createElement("tr",{key:e.id,onClick:(t=e.id,function(){return Object(u.navigate)("/scans/".concat(t))}),className:"pointer"},r.a.createElement("td",{title:e.scan_time.toFormat("FF")},e.scan_time.toRelative()),r.a.createElement("td",null,e.network_id),r.a.createElement("td",null,e.devices_discovered_count),r.a.createElement("td",null,e.people_seen_count),r.a.createElement("td",null,e.primary_devices_seen_count));var t})))),void 0===n&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_e.a,{animation:"border"})))},De=function(e){var t=e.scan;return r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:20}},r.a.createElement("div",null,r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Time")),r.a.createElement(E.a,{value:t.scan_time.toFormat("FF"),disabled:!0}))),r.a.createElement("div",null,r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Network Id")),r.a.createElement(E.a,{value:t.network_id,disabled:!0}))))},Te=function(e){var t=e.scan,n=Object(a.useState)(void 0),c=Object(o.a)(n,2),i=c[0],l=c[1],s=Object(a.useState)(void 0),d=Object(o.a)(s,2),m=d[0],f=d[1];Object(a.useEffect)((function(){F(t.discoveries.map((function(e){return e.device_id}))).then((function(e){return l(e)})).catch((function(e){return console.error(e)}))}),[t.discoveries]),Object(a.useEffect)((function(){void 0!==i&&A(i.filter((function(e){return null!==e.owner_id})).map((function(e){return e.owner_id})).filter((function(e,t,n){return n.indexOf(e)===t}))).then((function(e){return f(e)})).catch((function(e){return console.error(e)}))}),[i]);return r.a.createElement(ye.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"MAC Address"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Owner"),r.a.createElement("th",null,"Is Primary"),r.a.createElement("th",null,"Hostname"),r.a.createElement("th",null,"IP Address"))),r.a.createElement("tbody",null,void 0!==t.discoveries&&t.discoveries.map((function(e){var t,n=null===i||void 0===i?void 0:i.find((function(t){return t.id===e.device_id})),a=void 0!==n?null===m||void 0===m?void 0:m.find((function(e){return e.id===n.owner_id})):void 0;return r.a.createElement("tr",{key:e.id,onClick:(t=e.device_id,function(){return Object(u.navigate)("/devices/".concat(t))}),className:"pointer"},r.a.createElement("td",{className:"mac-address"},null===n||void 0===n?void 0:n.mac_address),r.a.createElement("td",null,null===n||void 0===n?void 0:n.name),r.a.createElement("td",null,null===a||void 0===a?void 0:a.name),r.a.createElement("td",null,void 0===n?void 0:n.is_primary?"\u2714\ufe0f":"\u274c"),r.a.createElement("td",null,e.hostname),r.a.createElement("td",null,e.ip_address))}))))},Ne=function(e){var t=e.id;Object(u.useTitle)("Scan ".concat(t," - ").concat(s));var n=Object(a.useState)(void 0),c=Object(o.a)(n,2),i=c[0],l=c[1];return Object(a.useEffect)((function(){var e;(e=t,fetch("".concat(w.api.root,"/api/scan/").concat(e)).then((function(e){return 200===e.status?e.json().then((function(e){return{id:e.id,scan_time:x(e.scan_time),network_id:e.network_id,discoveries:e.discoveries}})):void 0}))).then((function(e){l(e)})).catch((function(e){return de("scan #".concat(t))}))}),[t]),r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center mb-4"},"Scan #",t),void 0!==i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(De,{scan:i}),r.a.createElement("div",{className:"mt-4"},r.a.createElement(Te,{scan:i}))),void 0===i&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_e.a,{animation:"border"})))},ke=function(){Object(u.useTitle)("Devices - ".concat(s));var e=fe().devices,t=me().people,n=Object(a.useState)(void 0),c=Object(o.a)(n,2),i=c[0],l=c[1],d=Object(a.useState)(null),m=Object(o.a)(d,2),f=m[0],O=m[1],y=Object(a.useState)(null),_=Object(o.a)(y,2),j=_[0],g=_[1],S=function(e){return function(){return O(e)}},D=function(e){return function(){return g(e)}},T=function(e){if(void 0===t||null===e)return"";var n=t.find((function(t){return t.id===e}));return void 0===n?(console.error("Not able to find person ".concat(e)),"Not Found"):n.name},N=null===e||void 0===e?void 0:e.filter((function(e){return(void 0===i||-1!==e.name.indexOf(i)||-1!==e.mac_address.indexOf(i))&&(null===f||e.owner_id===f)&&(null===j||e.is_primary===j)})),k=Ee(N);return r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center"},"Devices"),r.a.createElement(ne.a,{className:"mb-3"},r.a.createElement(p.a,null,r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Search")),r.a.createElement(E.a,{type:"text",placeholder:"Device Name / MAC",onChange:function(e){return l(e.currentTarget.value)}})),r.a.createElement(h.a,{className:"ml-1",id:"owner-filter-dropdown",title:"Owner: ".concat(null===f?"":T(f))},r.a.createElement(b.a.Item,{onClick:S(null)},"Don't Filter"),void 0!==t&&t.map((function(e){return r.a.createElement(b.a.Item,{key:e.id,onClick:S(e.id)},e.name)}))),r.a.createElement(h.a,{className:"ml-1",id:"is_primary-filter-dropdown",title:"Primary: ".concat(null===j?"":j?"\u2714\ufe0f":"\u274c")},r.a.createElement(b.a.Item,{onClick:D(null)},"Don't Filter"),r.a.createElement(b.a.Item,{onClick:D(!0)},"\u2714\ufe0f"),r.a.createElement(b.a.Item,{onClick:D(!1)},"\u274c"))),r.a.createElement(ye.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"MAC Address"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Owner"),r.a.createElement("th",null,"Is Primary"),r.a.createElement("th",null,"First Seen"),r.a.createElement("th",null,"Last Seen"))),r.a.createElement("tbody",null,void 0!==k&&k.map((function(e){return r.a.createElement("tr",{key:e.id,onClick:(t=e.id,function(){return Object(u.navigate)("/devices/".concat(t))}),className:"pointer"},r.a.createElement("td",{className:"mac-address"},e.mac_address),r.a.createElement("td",null,e.name),r.a.createElement("td",null,T(e.owner_id)),r.a.createElement("td",null,e.is_primary?"\u2714\ufe0f":"\u274c"),r.a.createElement("td",null,e.first_seen.toFormat("ff")),r.a.createElement("td",{title:e.last_seen.toFormat("FF")},e.last_seen.toRelative()));var t})))),void 0===e&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_e.a,{animation:"border"})))},we=n(295),xe=function(e){var t,n,c=e.device,i=e.updateDevice,l=me().people,s=Object(a.useState)(c.name),u=Object(o.a)(s,2),d=u[0],m=u[1],f=Object(a.useState)(c.note),v=Object(o.a)(f,2),O=v[0],y=v[1],_=Object(a.useState)(c.owner_id),j=Object(o.a)(_,2),g=j[0],S=j[1],D=Object(a.useState)(c.is_primary),k=Object(o.a)(D,2),C=k[0],F=k[1],A=Object(a.useState)(!1),P=Object(o.a)(A,2),I=P[0],M=P[1],J=Object(a.useState)(""),R=Object(o.a)(J,2),L=R[0],H=R[1];Object(a.useEffect)((function(){m(c.name),y(c.note),S(c.owner_id),F(c.is_primary),M(!1)}),[c]),Object(a.useEffect)((function(){var e;(e=c.mac_address,fetch("".concat(w.api.root,"/api/external/mac-lookup/").concat(e)).then(function(){var e=Object(N.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.text());case 4:return e.abrupt("return","");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return H(e)}))}),[c]);var z=function(e){return function(){S(e),M(!0)}},W=function(e){return function(){F(e),M(!0)}};return r.a.createElement("div",null,void 0===c?r.a.createElement(_e.a,{animation:"border"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridGap:20}},r.a.createElement("div",null,r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"MAC Address")),r.a.createElement(E.a,{className:"mac-address",value:c.mac_address,disabled:!0})),r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Vendor")),r.a.createElement(E.a,{value:L,title:L,disabled:!0})),r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"First Seen")),r.a.createElement(E.a,{value:c.first_seen.toFormat("FF"),disabled:!0})),r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Last Seen")),r.a.createElement(E.a,{value:null!==(t=c.last_seen.toRelative())&&void 0!==t?t:"",title:c.last_seen.toFormat("FF"),disabled:!0})),r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Owner")),r.a.createElement(h.a,{as:p.a.Append,variant:"outline-secondary",title:null===g?"Not Set":0===(null===l||void 0===l?void 0:l.length)?"":null===l||void 0===l||null===(n=l.find((function(e){return e.id===g})))||void 0===n?void 0:n.name,id:"input-group-dropdown-2"},r.a.createElement(b.a.Item,{onClick:z(null)},"Not Set"),(null!==l&&void 0!==l?l:[]).sort((function(e,t){return e.name===t.name?0:e.name<t.name?-1:1})).map((function(e){return r.a.createElement(b.a.Item,{key:e.id,onClick:z(e.id)},e.name)})))),r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Primary")),r.a.createElement(h.a,{as:p.a.Append,variant:"outline-secondary",title:void 0===C?"":C?"\u2714\ufe0f":"\u274c",id:"input-group-dropdown-2"},r.a.createElement(b.a.Item,{onClick:W(!0)},"\u2714\ufe0f"),r.a.createElement(b.a.Item,{onClick:W(!1)},"\u274c")))),r.a.createElement("div",null,r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Name")),r.a.createElement(E.a,{value:d,onChange:function(e){m(e.currentTarget.value),M(!0)}})),r.a.createElement(we.a.Group,null,r.a.createElement(we.a.Label,null,"Notes"),r.a.createElement(we.a.Control,{as:"textarea",rows:"4",className:"mb-1",value:O,onChange:function(e){y(e.currentTarget.value),M(!0)}}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(re.a,{variant:"primary",disabled:!I,onClick:function(){void 0!==c&&void 0!==C&&function(e,t,n,a,r){return fetch("".concat(w.api.root,"/api/device/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,note:n,ownerId:a,isPrimary:r})}).then((function(e){if(200===e.status)return e.json().then((function(e){return{id:e.id,mac_address:e.mac_address,name:e.name,note:e.note,owner_id:e.owner_id,is_primary:e.is_primary,first_seen:x(e.first_seen),last_seen:x(e.last_seen),last_10_discoveries:e.last_10_discoveries}}));throw Error("Server Error (HTTP".concat(e.status,")"))}))}(c.id,d,O,g,C).then((function(e){i(e),se("Updated ".concat(e.name," (#").concat(e.id,")"))}))}},"Save Changes")))))))},Ce=function(e){var t=e.device,n=Object(a.useState)(void 0),c=Object(o.a)(n,2),i=c[0],l=c[1];Object(a.useEffect)((function(){C(t.last_10_discoveries.map((function(e){return e.scan_id}))).then((function(e){return l(e)})).catch((function(e){return console.error(e)}))}),[t.last_10_discoveries]);return r.a.createElement(ye.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Network Id"),r.a.createElement("th",null,"Hostname"),r.a.createElement("th",null,"IP Address"))),r.a.createElement("tbody",null,void 0!==t.last_10_discoveries&&t.last_10_discoveries.map((function(e){var t,n=null===i||void 0===i?void 0:i.find((function(t){return t.id===e.scan_id}));return r.a.createElement("tr",{key:e.id,onClick:(t=e.scan_id,function(){return Object(u.navigate)("/scans/".concat(t))}),className:"pointer"},r.a.createElement("td",{title:null===n||void 0===n?void 0:n.scan_time.toFormat("FF")},null===n||void 0===n?void 0:n.scan_time.toRelative()),r.a.createElement("td",null,null===n||void 0===n?void 0:n.network_id),r.a.createElement("td",null,e.hostname),r.a.createElement("td",null,e.ip_address))}))))},Fe=_.DateTime.local().minus({weeks:1}).startOf("day"),Ae=_.DateTime.local().endOf("day"),Pe=function(e){var t=e.device,n=le("device",Fe,Ae),c=n.getStartDate,i=n.getEndDate,l=n.getStartAndEndDates,s=n.setStartAndEndDates,u=n.storedStartAndEndDates,d=Object(a.useState)(Object(ve.a)({},t.id,[])),m=Object(o.a)(d,2),f=m[0],v=m[1];return Object(a.useEffect)((function(){P([t.id],c(),i()).then((function(e){return v(e)}))}),[t.id,u]),r.a.createElement("div",null,r.a.createElement(S,{startAndEndDates:l(),setStartAndEndDates:s}),r.a.createElement(te,{entityIds:[t.id+""],entityDiscoveryTimes:Object(k.a)(Object(ve.a)({},t.id,[]),f),entityIdNameMap:Object(ve.a)({},t.id,t.name),minDate:c(),maxDate:i(),height:90}))},Ie=n(294),Me=function(e){var t=e.device,n=fe().devices,c=Object(a.useState)(!1),i=Object(o.a)(c,2),l=i[0],s=i[1],d=Object(a.useState)(void 0),m=Object(o.a)(d,2),f=m[0],v=m[1],h=Object(a.useState)(""),b=Object(o.a)(h,2),O=b[0],y=b[1],_=Object(a.useState)(!1),j=Object(o.a)(_,2),g=j[0],S=j[1],D=function(){s(!1),v(void 0),y("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-right"},r.a.createElement(re.a,{variant:"light",onClick:function(){return s(!0)}},"Merge With Another Device")),r.a.createElement(Ie.a,{show:l,onHide:D,centered:!0},r.a.createElement(Ie.a.Header,{closeButton:!0},r.a.createElement(Ie.a.Title,null,'Merge "',t.name,'" (',t.mac_address,") With Another Device?")),r.a.createElement(Ie.a.Body,null,r.a.createElement("p",null,"This action will permanently merge the history from this device into another device; this cannot be undone!"),r.a.createElement("p",null,"The discoveries relating to this device will be bound to the device being merged with and this device will be deleted."),r.a.createElement(p.a,{className:"mb-3"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Destination Device Id")),r.a.createElement(E.a,{placeholder:"Device Id",value:O,onChange:function(e){return y(e.currentTarget.value)},disabled:void 0!==f})),void 0===f?r.a.createElement(re.a,{variant:"primary",onClick:function(){var e=(n||[]).find((function(e){return e.id+""===O}));v(void 0!==e?e:null)}},"Lookup Device"):null===f?r.a.createElement("div",null,"Error: Could not find device matching the id provided"):r.a.createElement("div",null,"Selected Device: ",f.name," (",f.mac_address,")")),r.a.createElement(Ie.a.Footer,null,r.a.createElement(re.a,{variant:"secondary",onClick:D,disabled:g},"Cancel"),r.a.createElement(re.a,{variant:"primary",onClick:function(){var e,n;null!==f&&void 0!==f&&(S(!0),(e=t.id,n=f.id,fetch("".concat(w.api.root,"/api/device/").concat(e,"/merge"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({destinationDeviceId:n})}).then((function(e){if(200===e.status)return e.json().then((function(e){return{id:e.id,mac_address:e.mac_address,name:e.name,note:e.note,owner_id:e.owner_id,is_primary:e.is_primary,first_seen:x(e.first_seen),last_seen:x(e.last_seen),last_10_discoveries:e.last_10_discoveries}}));throw Error("Server Error (HTTP".concat(e.status,")"))}))).then((function(e){Object(u.navigate)("/devices/".concat(e.id)),S(!1),D()})))},disabled:g},"Merge"))))},Je=function(e,t){return void 0===t?e:""===t.name?t.mac_address.toUpperCase():t.name},Re=function(e){var t=e.id,n=Object(a.useState)(void 0),c=Object(o.a)(n,2),i=c[0],l=c[1];Object(u.useTitle)("Device: ".concat(Je(t,i)," - ").concat(s)),Object(a.useEffect)((function(){var e;(e=t,fetch("".concat(w.api.root,"/api/device/").concat(e)).then((function(e){return 200===e.status?e.json().then((function(e){return{id:e.id,mac_address:e.mac_address,name:e.name,note:e.note,owner_id:e.owner_id,is_primary:e.is_primary,first_seen:x(e.first_seen),last_seen:x(e.last_seen),last_10_discoveries:e.last_10_discoveries}})):void 0}))).then((function(e){l(e)})).catch((function(e){return de("device #".concat(t))}))}),[t]);return r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center mb-4"},Je(t,i)," (#",t,")"),void 0!==i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{device:i,updateDevice:function(e){return l(e)}}),r.a.createElement("div",{className:"mt-4"},r.a.createElement(Pe,{device:i})),r.a.createElement("div",{className:"mt-4"},r.a.createElement(Ce,{device:i})),r.a.createElement("div",{className:"mt-4"},r.a.createElement(Me,{device:i}))),void 0===i&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_e.a,{animation:"border"})))},Le=n(297),He=n(296),ze=n.p+"static/media/logo.ffba17bd.png",We={"/":"Home","/scans":"Scans","/devices":"Devices","/people":"People","/current":"Current"},Be=function(){var e=Object(u.usePath)(),t=function(e){return function(){return Object(u.navigate)(e)}};return r.a.createElement(Le.a,{collapseOnSelect:!0,expand:"md",bg:"light",variant:"light",sticky:"top"},r.a.createElement(d.a,null,r.a.createElement(Le.a.Brand,{onClick:t("/")},r.a.createElement("img",{src:ze,height:"30",className:"d-inline-block align-top",alt:"Emotionify Banner Logo",style:{cursor:"pointer"}})),r.a.createElement(Le.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(Le.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(He.a,{className:"mr-auto"},Object.keys(We).map((function(n){return r.a.createElement(He.a.Link,{key:n,href:"#",onClick:t(n),active:e===n},We[n])}))))))},Ge=function(){return Object(u.useTitle)("Page Not Found - ".concat(s)),r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center"},"Not Found"))},Ue=function(e){var t=e.people,n=pe(t);return r.a.createElement(ye.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Devices"),r.a.createElement("th",null,"First Seen"),r.a.createElement("th",null,"Last Seen"))),r.a.createElement("tbody",null,void 0!==n&&n.map((function(e){return r.a.createElement("tr",{key:e.id,onClick:(t=e.id,function(){return Object(u.navigate)("/people/".concat(t))}),className:"pointer"},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.device_count),r.a.createElement("td",null,null===e.first_seen?"Never":e.first_seen.toFormat("ff")),r.a.createElement("td",{title:null===e.last_seen?"Never":e.last_seen.toFormat("ff")},null===e.last_seen?"Never":e.last_seen.toRelative()));var t}))))},Ve=function(){Object(u.useTitle)("People - ".concat(s));var e=me(),t=e.people,n=e.refresh,c=Object(a.useState)(void 0),i=Object(o.a)(c,2),l=i[0],d=i[1],m=null===t||void 0===t?void 0:t.slice().filter((function(e){return void 0===l||-1!==e.name.indexOf(l)}));return r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center"},"People"),r.a.createElement(ne.a,{className:"mb-3 justify-content-between"},r.a.createElement(p.a,null,r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Search")),r.a.createElement(E.a,{type:"text",placeholder:"Person Name",onChange:function(e){return d(e.currentTarget.value)}})),r.a.createElement(re.a,{variant:"outline-secondary",onClick:function(){return fetch("".concat(w.api.root,"/api/person"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){return 200===e.status?e.json().then((function(e){return{id:e.id,name:e.name,note:e.note,first_seen:null!==e.first_seen?x(e.first_seen):null,last_seen:null!==e.last_seen?x(e.last_seen):null}})):void 0})).then((function(e){return n()}));var e}},"Add Person")),void 0!==m&&r.a.createElement(Ue,{people:m}),void 0===m&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_e.a,{animation:"border"})))},Ze=function(e){var t,n=e.person,c=e.setPerson,i=Object(a.useState)(""),l=Object(o.a)(i,2),s=l[0],u=l[1],d=Object(a.useState)(""),m=Object(o.a)(d,2),f=m[0],v=m[1],h=Object(a.useState)(!1),b=Object(o.a)(h,2),O=b[0],y=b[1];Object(a.useEffect)((function(){u(n.name),v(n.note),y(!1)}),[n]);return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridGap:20}},r.a.createElement("div",null,r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"First Seen")),r.a.createElement(E.a,{value:null===n.first_seen?"Never":n.first_seen.toFormat("FF"),disabled:!0})),r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Last Seen")),r.a.createElement(E.a,{value:null===n.last_seen?"Never":null!==(t=n.last_seen.toRelative())&&void 0!==t?t:"",title:null===n.last_seen?"":n.last_seen.toFormat("FF"),disabled:!0}))),r.a.createElement("div",null,r.a.createElement(p.a,{className:"mb-2"},r.a.createElement(p.a.Prepend,null,r.a.createElement(p.a.Text,null,"Name")),r.a.createElement(E.a,{value:s,onChange:function(e){u(e.currentTarget.value),y(!0)}})),r.a.createElement(we.a.Group,null,r.a.createElement(we.a.Label,null,"Notes"),r.a.createElement(we.a.Control,{as:"textarea",rows:"3",className:"mb-1",value:f,onChange:function(e){v(e.currentTarget.value),y(!0)}}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(re.a,{variant:"primary",disabled:!O,onClick:function(){void 0!==n&&function(e,t,n){return fetch("".concat(w.api.root,"/api/person/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,note:n})}).then((function(e){if(200===e.status)return e.json().then((function(e){return{id:e.id,name:e.name,note:e.note,first_seen:null!==e.first_seen?x(e.first_seen):null,last_seen:null!==e.last_seen?x(e.last_seen):null}}));throw Error("Server Error (HTTP".concat(e.status,")"))}))}(n.id,s,f).then((function(e){c(e),se("Updated ".concat(e.name," (#").concat(e.id,")"))}))}},"Save Changes"))))))},$e=function(e){var t=e.id,n=Object(a.useState)(void 0),c=Object(o.a)(n,2),i=c[0],l=c[1];Object(a.useEffect)((function(){F(void 0,void 0,t,void 0).then((function(e){return l(e)})).catch((function(e){return console.error(e)}))}),[t]);var s=null===i||void 0===i?void 0:i.slice().sort((function(e,t){return e.mac_address>t.mac_address?1:-1})).sort((function(e,t){return e.name===t.name?0:""===e.name?1:""===t.name?-1:e.name>t.name?1:-1}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"MAC Address"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Is Primary"),r.a.createElement("th",null,"First Seen"),r.a.createElement("th",null,"Last Seen"))),r.a.createElement("tbody",null,void 0!==s&&s.map((function(e){return r.a.createElement("tr",{key:e.id,onClick:(t=e.id,function(){return Object(u.navigate)("/devices/".concat(t))}),className:"pointer"},r.a.createElement("td",{className:"mac-address"},e.mac_address),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.is_primary?"\u2714\ufe0f":"\u274c"),r.a.createElement("td",null,e.first_seen.toFormat("ff")),r.a.createElement("td",null,e.last_seen.toRelative()));var t})))),void 0===s&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_e.a,{animation:"border"})))},qe=_.DateTime.local().minus({weeks:1}).startOf("day"),Xe=_.DateTime.local().endOf("day"),Ke=function(e){var t=e.person,n=le("person",qe,Xe),c=n.getStartDate,i=n.getEndDate,l=n.getStartAndEndDates,s=n.setStartAndEndDates,u=n.storedStartAndEndDates,d=Object(a.useState)(Object(ve.a)({},t.id,[])),m=Object(o.a)(d,2),f=m[0],v=m[1];return Object(a.useEffect)((function(){I([t.id],c(),i()).then((function(e){return v(e)}))}),[u]),r.a.createElement("div",null,r.a.createElement(S,{startAndEndDates:l(),setStartAndEndDates:s}),r.a.createElement(te,{entityIds:[t.id+""],entityDiscoveryTimes:f,entityIdNameMap:Object(ve.a)({},t.id,t.name),minDate:c(),maxDate:i(),height:90}))},Qe=function(e){var t=e.id,n=Object(a.useState)(void 0),c=Object(o.a)(n,2),i=c[0],l=c[1];Object(u.useTitle)("Person: ".concat(void 0===i?t:i.name," - ").concat(s)),Object(a.useEffect)((function(){var e;(e=t,fetch("".concat(w.api.root,"/api/person/").concat(e)).then((function(e){return 200===e.status?e.json().then((function(e){return{id:e.id,name:e.name,note:e.note,first_seen:null!==e.first_seen?x(e.first_seen):null,last_seen:null!==e.last_seen?x(e.last_seen):null}})):void 0}))).then((function(e){return l(e)})).catch((function(e){return de("person #".concat(t))}))}),[t]);var d=function(){var e=Object(N.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm('Are you sure you want to delete "'.concat(null===i||void 0===i?void 0:i.name,'"?'))){e.next=6;break}return e.next=4,n=t,fetch("".concat(w.api.root,"/api/person/").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return 200===e.status}));case 4:e.sent?(Object(u.navigate)("/people"),se('Successfully deleted "'.concat(null===i||void 0===i?void 0:i.name,'"'))):ue('Failed to deleted "'.concat(null===i||void 0===i?void 0:i.name,'"'),"Unknown server error - maybe they don't exist anymore?");case 6:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center mb-4"},null===i||void 0===i?void 0:i.name," (#",t,")"),void 0!==i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze,{person:i,setPerson:function(e){return l(e)}}),r.a.createElement("div",{className:"mt-4"},r.a.createElement(Ke,{person:i})),r.a.createElement("div",{className:"mt-4"},r.a.createElement($e,{id:t}))),void 0===i&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_e.a,{animation:"border"})),void 0!==i&&r.a.createElement("div",{className:"mt-5 text-center"},r.a.createElement(re.a,{variant:"outline-danger",onClick:d},"Delete Person")))},Ye=function(){Object(u.useTitle)("Current - ".concat(s));var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(void 0),l=Object(o.a)(i,2),d=l[0],m=l[1],f=Object(a.useState)(void 0),E=Object(o.a)(f,2),p=E[0],h=E[1],b=Object(a.useState)(void 0),O=Object(o.a)(b,2),y=O[0],_=O[1];Object(a.useEffect)((function(){void 0!==d&&F(d.discoveries.map((function(e){return e.device_id})).filter((function(e,t,n){return n.indexOf(e)===t}))).then((function(e){return h(e)})).catch((function(e){return de("devices")}))}),[d]),Object(a.useEffect)((function(){void 0!==p&&A(p.filter((function(e){return null!==e.owner_id})).map((function(e){return e.owner_id})).filter((function(e,t,n){return n.indexOf(e)===t}))).then((function(e){return _(e)})).catch((function(e){return de("people")}))}),[p]);return r.a.createElement(v,null,r.a.createElement("h1",{className:"text-center"},"Current"),r.a.createElement("div",{className:"text-center my-3"},r.a.createElement(re.a,{disabled:n,onClick:function(){c(!0),m(void 0),fetch("".concat(w.api.root,"/api/run/single-scan")).then(function(){var e=Object(N.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return e.abrupt("return",t.json().then((function(e){return{id:e.id,scan_time:x(e.scan_time),network_id:e.network_id,discoveries:e.discoveries}})));case 4:if(500!==t.status){e.next=8;break}return e.abrupt("return",t.text().then((function(e){throw Error(e)})));case 8:return e.abrupt("return",void 0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){m(e)})).catch((function(e){ue("Server error",e.message)})).finally((function(){return c(!1)}))}},"Run Scan Now",n&&r.a.createElement(_e.a,{animation:"border",size:"sm",className:"ml-2"}))),void 0!==d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mb-2"},r.a.createElement(De,{scan:d})),void 0!==y?r.a.createElement("div",{className:"mb-2"},r.a.createElement(Ue,{people:y})):r.a.createElement("div",{className:"text-center mb-2"},r.a.createElement(_e.a,{animation:"border"})),r.a.createElement("div",{className:"text-center mb-2"},r.a.createElement(re.a,{onClick:function(){return void 0!==d&&Object(u.navigate)("/scans/".concat(d.id))}},"Go to Scan #",d.id)),r.a.createElement("div",{className:"mb-3"},r.a.createElement(Te,{scan:d}))))},et=function(e,t){return/^\d+$/.test(e)?r.a.createElement(t,{id:parseInt(e)}):r.a.createElement(Ge,null)},tt=function(){var e={"/":function(){return r.a.createElement(Oe,null)},"/scans":function(){return r.a.createElement(Se,null)},"/scans/:id":function(e){var t=e.id;return et(t,Ne)},"/devices":function(){return r.a.createElement(ke,null)},"/devices/:id":function(e){var t=e.id;return et(t,Re)},"/people":function(){return r.a.createElement(Ve,null)},"/people/:id":function(e){var t=e.id;return et(t,Qe)},"/current":function(){return r.a.createElement(Ye,null)}},t=Object(u.useRoutes)(e);return Object(u.useRedirect)("/about/","/about"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,null),r.a.createElement("div",{className:"my-3"},t||r.a.createElement(Ge,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(tt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[264,1,2]]]);